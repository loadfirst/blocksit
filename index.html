<!DOCTYPE html>
<html>
<head>
<title>jQuery实用图片瀑布流插件BlocksIt</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel='stylesheet' href='css/style.css' media='screen' />
<script src="jquery.min.js"></script>
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<script src="blocksit.js"></script>
<script>
$(document).ready(function() {	
    //blocksit define
    $(window).load( function() {
        $('#container').BlocksIt({
            numOfCol: 5,
            offsetX: 8,
            offsetY: 8,
            blockElement: '.grid'
        });
    });
    
});
$(function(){
    $(".add").click(function(){
        var text;
        var data = new Array();
        var obj = new Object();
        obj.imgs = "images/img24.jpg";
        obj.title = "Sundays Sunset";
        obj.content = "Beach view sunset...";
        obj.author = "by Robert Strachan";
        // for (var i = 5 - 1; i >= 0; i--) {
        //     data.push(obj);
        // };
        data[0] = obj;
       var obj = new Object();
        obj.imgs = "images/img26.jpg";
        obj.title = "Sundays Sunset";
        obj.content = "Beach view sunset...";
        obj.author = "by Robert Strachan";
         data[1] = obj;
        var obj = new Object();
        obj.imgs = "images/img27.jpg";
        obj.title = "Sundays Sunset";
        obj.content = "Beach view sunset...";
        obj.author = "by Robert Strachan";
         data[2] = obj;
        var obj = new Object();
        obj.imgs = "images/img15.jpg";
        obj.title = "Sundays Sunset";
        obj.content = "Beach view sunset...";
        obj.author = "by Robert Strachan";
         data[3] = obj;
        var obj = new Object();
        obj.imgs = "images/img27.jpg";
        obj.title = "Sundays Sunset";
        obj.content = "Beach view sunset...";
        obj.author = "by Robert Strachan";
        data[4] = obj;
        var i=5;
        loadData.loading(data,i)	
    });	
});
var loadData = {
    loading: function(data,i){   
        if(i>0){
         loadData.handle(data,i);   
        }             
        
    },

    handle:function(data,i){

        i=i-1;
        if(i>=0){
         var ob = data[i];
         var text = "<div class='grid news'><div class='imgholder''><img src="+ob.imgs+" /></div><strong>"+ob.title+"</strong><p>"+ob.content+"</p><div class='meta'>"+ob.author+"</div></div>";
        $("#container").append(text);   
        $('#container').BlocksIt({numOfCol: 5,offsetX: 8,offsetY: 8,blockElement: '.grid'});  
        $("#container>div:last-child").css("margin-top","0px");        
          $("#container>div:last-child").find("img").load(function(){
            loadData.handle(data,i);
          });     
        }
    }           
  }

</script>
<style type="text/css">
    .news{
        margin-top:20px;
        transition: all 1s;
    }
</style>
</head>
<body>
<!-- Content -->
<section id="wrapper">
    <hgroup>
        <h2>jQuery瀑布流布局插件BlocksIt</h2> 	
    </hgroup>
<div id="container">
<div class="grid">
        <div class="imgholder">
            <img src="images/img27.jpg" />
        </div>
        <strong>Sunset Lake</strong>
        <p>A peaceful sunset view...</p>
        <div class="meta">by j osborn</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img26.jpg" />
        </div>
        <strong>Bridge to Heaven</strong>
        <p>Where is the bridge lead to?</p>
        <div class="meta">by SigitEko</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img15.jpg" />
        </div>
        <strong>Autumn</strong>
        <p>The fall of the tree...</p>
        <div class="meta">by Lars van de Goor</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img23.jpg" />
        </div>
        <strong>Winter Whisper</strong>
        <p>Winter feel...</p>
        <div class="meta">by Andrea Andrade</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img17.jpg" />
        </div>
        <strong>Light</strong>
        <p>The only shinning light...</p>
        <div class="meta">by Lars van de Goor</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img22.jpg" />
        </div>
        <strong>Rooster's Ranch</strong>
        <p>Rooster's ranch landscape...</p>
        <div class="meta">by Andrea Andrade</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img16.jpg" />
        </div>
        <strong>Autumn Light</strong>
        <p>Sun shinning into forest...</p>
        <div class="meta">by Lars van de Goor</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img21.jpg" />
        </div>
        <strong>Yellow cloudy</strong>
        <p>It is yellow cloudy...</p>
        <div class="meta">by Zsolt Zsigmond</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img28.jpg" />
        </div>
        <strong>Herringfleet Mill</strong>
        <p>Just a herringfleet mill...</p>
        <div class="meta">by Ian Flindt</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img2.jpg" />
        </div>
        <strong>Battle Field</strong>
        <p>Battle Field for you...</p>
        <div class="meta">by Andrea Andrade</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img24.jpg" />
        </div>
        <strong>Sundays Sunset</strong>
        <p>Beach view sunset...</p>
        <div class="meta">by Robert Strachan</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img19.jpg" />
        </div>
        <strong>Sun Flower</strong>
        <p>Good Morning Sun flower...</p>
        <div class="meta">by Zsolt Zsigmond</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img5.jpg" />
        </div>
        <strong>Beach</strong>
        <p>Something on beach...</p>
        <div class="meta">by unknown</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img25.jpg" />
        </div>
        <strong>Flowers</strong>
        <p>Hello flowers...</p>
        <div class="meta">by R A Stanley</div>
    </div>
    <div class="grid">
        <div class="imgholder">
            <img src="images/img20.jpg" />
        </div>
        <strong>Alone</strong>
        <p>Lonely plant...</p>
        <div class="meta">by Zsolt Zsigmond</div>
    </div> <!---->
</div>
</section>
<button class="add" style="width:200px;height:100px;">添加</button>
</body>
</html>